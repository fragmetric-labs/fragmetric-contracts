//! This code was AUTOGENERATED using the codama library.
//! Please DO NOT EDIT THIS FILE, instead use visitors
//! to add features, then rerun codama to update it.
//!
//! <https://github.com/codama-idl/codama>
//!

use crate::generated::types::WithdrawalBatch;
use borsh::BorshDeserialize;
use borsh::BorshSerialize;
use solana_program::pubkey::Pubkey;

#[derive(BorshSerialize, BorshDeserialize, Clone, Debug, Eq, PartialEq)]
#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
pub struct AssetState {
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub token_mint: Pubkey,
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub token_program: Pubkey,
    pub accumulated_deposit_capacity_amount: u64,
    pub accumulated_deposit_amount: u64,
    pub depositable: u8,
    pub padding: [u8; 4],
    pub withdrawable: u8,
    pub normal_reserve_rate_bps: u16,
    pub normal_reserve_max_amount: u64,
    pub withdrawal_last_created_request_id: u64,
    pub withdrawal_last_processed_batch_id: u64,
    pub withdrawal_last_batch_enqueued_at: i64,
    pub withdrawal_last_batch_processed_at: i64,
    pub withdrawal_pending_batch: WithdrawalBatch,
    pub padding2: [u8; 15],
    pub withdrawal_num_queued_batches: u8,
    pub withdrawal_queued_batches: [WithdrawalBatch; 10],
    #[cfg_attr(feature = "serde", serde(with = "serde_with::As::<serde_with::Bytes>"))]
    pub reserved: [u8; 56],
    /// receipt token amount that users can request to withdraw with the given asset from the fund.
    /// it can be conditionally inaccurate on price changes among multiple assets, so make sure to update this properly before any use of it.
    /// do not make any hard limit constraints with this value from off-chain. a requested withdrawal amount will be adjusted on-chain based on the status.
    pub withdrawable_value_as_receipt_token_amount: u64,
    /// informative: reserved amount that users can claim for processed withdrawal requests, which is not accounted for as an asset of the fund.
    pub withdrawal_user_reserved_amount: u64,
    /// asset: receivable amount that the fund may charge the users requesting withdrawals.
    /// It is accrued during either the preparation of the withdrawal obligation or rebalancing of LST like fees from (un)staking or (un)restaking.
    /// And it shall be settled by the withdrawal fee normally. And it also can be written off by a donation operation.
    /// Then it costs the rebalancing expense to the capital of the fund itself as an operation cost instead of charging the users requesting withdrawals.
    pub operation_receivable_amount: u64,
    /// asset: remaining asset for cash-in/out
    pub operation_reserved_amount: u64,
}
