//! This code was AUTOGENERATED using the codama library.
//! Please DO NOT EDIT THIS FILE, instead use visitors
//! to add features, then rerun codama to update it.
//!
//! <https://github.com/codama-idl/codama>
//!

use crate::generated::types::AssetState;
use crate::generated::types::NormalizedToken;
use crate::generated::types::OperationState;
use crate::generated::types::RestakingVault;
use crate::generated::types::SupportedToken;
use crate::generated::types::TokenValuePod;
use borsh::BorshDeserialize;
use borsh::BorshSerialize;
use solana_program::pubkey::Pubkey;

#[derive(BorshSerialize, BorshDeserialize, Clone, Debug, Eq, PartialEq)]
#[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
pub struct FundAccount {
    pub discriminator: [u8; 8],
    pub data_version: u16,
    pub bump: u8,
    pub reserve_account_bump: u8,
    pub treasury_account_bump: u8,
    pub padding: [u8; 9],
    pub transfer_enabled: u8,
    pub address_lookup_table_enabled: u8,
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub address_lookup_table_account: Pubkey,
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub reserve_account: Pubkey,
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub treasury_account: Pubkey,
    /// receipt token information
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub receipt_token_mint: Pubkey,
    #[cfg_attr(
        feature = "serde",
        serde(with = "serde_with::As::<serde_with::DisplayFromStr>")
    )]
    pub receipt_token_program: Pubkey,
    pub receipt_token_decimals: u8,
    pub padding2: [u8; 7],
    pub receipt_token_supply_amount: u64,
    pub one_receipt_token_as_sol: u64,
    pub receipt_token_value_updated_slot: u64,
    pub receipt_token_value: TokenValuePod,
    /// global withdrawal configurations
    pub withdrawal_batch_threshold_interval_seconds: i64,
    pub withdrawal_fee_rate_bps: u16,
    pub withdrawal_enabled: u8,
    pub deposit_enabled: u8,
    pub donation_enabled: u8,
    pub padding4: [u8; 3],
    /// SOL deposit & withdrawal
    pub sol: AssetState,
    /// underlying assets
    pub padding6: [u8; 15],
    pub num_supported_tokens: u8,
    pub supported_tokens: [SupportedToken; 30],
    /// optional basket of underlying assets
    pub normalized_token: NormalizedToken,
    /// investments
    pub padding7: [u8; 15],
    pub num_restaking_vaults: u8,
    pub restaking_vaults: [RestakingVault; 30],
    /// fund operation state
    pub operation: OperationState,
}

impl FundAccount {
    pub const LEN: usize = 150648;

    #[inline(always)]
    pub fn from_bytes(data: &[u8]) -> Result<Self, std::io::Error> {
        let mut data = data;
        Self::deserialize(&mut data)
    }
}

impl<'a> TryFrom<&solana_program::account_info::AccountInfo<'a>> for FundAccount {
    type Error = std::io::Error;

    fn try_from(
        account_info: &solana_program::account_info::AccountInfo<'a>,
    ) -> Result<Self, Self::Error> {
        let mut data: &[u8] = &(*account_info.data).borrow();
        Self::deserialize(&mut data)
    }
}

#[cfg(feature = "anchor")]
impl anchor_lang::AccountDeserialize for FundAccount {
    fn try_deserialize_unchecked(buf: &mut &[u8]) -> anchor_lang::Result<Self> {
        Ok(Self::deserialize(buf)?)
    }
}

#[cfg(feature = "anchor")]
impl anchor_lang::AccountSerialize for FundAccount {}

#[cfg(feature = "anchor")]
impl anchor_lang::Owner for FundAccount {
    fn owner() -> Pubkey {
        crate::RESTAKING_ID
    }
}

#[cfg(feature = "anchor-idl-build")]
impl anchor_lang::IdlBuild for FundAccount {}

#[cfg(feature = "anchor-idl-build")]
impl anchor_lang::Discriminator for FundAccount {
    const DISCRIMINATOR: [u8; 8] = [0; 8];
}
