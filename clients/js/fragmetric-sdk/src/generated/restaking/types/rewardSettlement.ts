/**
 * This code was AUTOGENERATED using the codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  combineCodec,
  fixDecoderSize,
  fixEncoderSize,
  getArrayDecoder,
  getArrayEncoder,
  getBytesDecoder,
  getBytesEncoder,
  getStructDecoder,
  getStructEncoder,
  getU128Decoder,
  getU128Encoder,
  getU16Decoder,
  getU16Encoder,
  getU64Decoder,
  getU64Encoder,
  getU8Decoder,
  getU8Encoder,
  type Codec,
  type Decoder,
  type Encoder,
  type ReadonlyUint8Array,
} from '@solana/kit';
import {
  getRewardSettlementBlockDecoder,
  getRewardSettlementBlockEncoder,
  type RewardSettlementBlock,
  type RewardSettlementBlockArgs,
} from '.';

export type RewardSettlement = {
  rewardId: number;
  rewardPoolId: number;
  numSettlementBlocks: number;
  settlementBlocksHead: number;
  settlementBlocksTail: number;
  padding: ReadonlyUint8Array;
  /** Leftovers from each settlement block when clearing */
  remainingAmount: bigint;
  claimedAmount: bigint;
  claimedAmountUpdatedSlot: bigint;
  settledAmount: bigint;
  settlementBlocksLastSlot: bigint;
  settlementBlocksLastRewardPoolContribution: bigint;
  settlementBlocks: Array<RewardSettlementBlock>;
};

export type RewardSettlementArgs = {
  rewardId: number;
  rewardPoolId: number;
  numSettlementBlocks: number;
  settlementBlocksHead: number;
  settlementBlocksTail: number;
  padding: ReadonlyUint8Array;
  /** Leftovers from each settlement block when clearing */
  remainingAmount: number | bigint;
  claimedAmount: number | bigint;
  claimedAmountUpdatedSlot: number | bigint;
  settledAmount: number | bigint;
  settlementBlocksLastSlot: number | bigint;
  settlementBlocksLastRewardPoolContribution: number | bigint;
  settlementBlocks: Array<RewardSettlementBlockArgs>;
};

export function getRewardSettlementEncoder(): Encoder<RewardSettlementArgs> {
  return getStructEncoder([
    ['rewardId', getU16Encoder()],
    ['rewardPoolId', getU8Encoder()],
    ['numSettlementBlocks', getU8Encoder()],
    ['settlementBlocksHead', getU8Encoder()],
    ['settlementBlocksTail', getU8Encoder()],
    ['padding', fixEncoderSize(getBytesEncoder(), 2)],
    ['remainingAmount', getU64Encoder()],
    ['claimedAmount', getU64Encoder()],
    ['claimedAmountUpdatedSlot', getU64Encoder()],
    ['settledAmount', getU64Encoder()],
    ['settlementBlocksLastSlot', getU64Encoder()],
    ['settlementBlocksLastRewardPoolContribution', getU128Encoder()],
    [
      'settlementBlocks',
      getArrayEncoder(getRewardSettlementBlockEncoder(), { size: 64 }),
    ],
  ]);
}

export function getRewardSettlementDecoder(): Decoder<RewardSettlement> {
  return getStructDecoder([
    ['rewardId', getU16Decoder()],
    ['rewardPoolId', getU8Decoder()],
    ['numSettlementBlocks', getU8Decoder()],
    ['settlementBlocksHead', getU8Decoder()],
    ['settlementBlocksTail', getU8Decoder()],
    ['padding', fixDecoderSize(getBytesDecoder(), 2)],
    ['remainingAmount', getU64Decoder()],
    ['claimedAmount', getU64Decoder()],
    ['claimedAmountUpdatedSlot', getU64Decoder()],
    ['settledAmount', getU64Decoder()],
    ['settlementBlocksLastSlot', getU64Decoder()],
    ['settlementBlocksLastRewardPoolContribution', getU128Decoder()],
    [
      'settlementBlocks',
      getArrayDecoder(getRewardSettlementBlockDecoder(), { size: 64 }),
    ],
  ]);
}

export function getRewardSettlementCodec(): Codec<
  RewardSettlementArgs,
  RewardSettlement
> {
  return combineCodec(
    getRewardSettlementEncoder(),
    getRewardSettlementDecoder()
  );
}
