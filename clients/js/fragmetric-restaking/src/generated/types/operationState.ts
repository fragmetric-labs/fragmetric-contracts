/**
 * This code was AUTOGENERATED using the codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  combineCodec,
  fixDecoderSize,
  fixEncoderSize,
  getBytesDecoder,
  getBytesEncoder,
  getI64Decoder,
  getI64Encoder,
  getStructDecoder,
  getStructEncoder,
  getU16Decoder,
  getU16Encoder,
  getU64Decoder,
  getU64Encoder,
  getU8Decoder,
  getU8Encoder,
  type Codec,
  type Decoder,
  type Encoder,
  type ReadonlyUint8Array,
} from '@solana/web3.js';
import {
  getOperationCommandEntryPodDecoder,
  getOperationCommandEntryPodEncoder,
  type OperationCommandEntryPod,
  type OperationCommandEntryPodArgs,
} from '.';

export type OperationState = {
  updatedSlot: bigint;
  updatedAt: bigint;
  expiredAt: bigint;
  padding: ReadonlyUint8Array;
  /**
   * when the no_transition flag turned on, current command should not be transitioned to other command.
   * the purpose of this flag is for internal testing by set boundary of the reset command operation.
   */
  noTransition: number;
  nextSequence: number;
  numOperated: bigint;
  nextCommand: OperationCommandEntryPod;
  reserved: ReadonlyUint8Array;
};

export type OperationStateArgs = {
  updatedSlot: number | bigint;
  updatedAt: number | bigint;
  expiredAt: number | bigint;
  padding: ReadonlyUint8Array;
  /**
   * when the no_transition flag turned on, current command should not be transitioned to other command.
   * the purpose of this flag is for internal testing by set boundary of the reset command operation.
   */
  noTransition: number;
  nextSequence: number;
  numOperated: number | bigint;
  nextCommand: OperationCommandEntryPodArgs;
  reserved: ReadonlyUint8Array;
};

export function getOperationStateEncoder(): Encoder<OperationStateArgs> {
  return getStructEncoder([
    ['updatedSlot', getU64Encoder()],
    ['updatedAt', getI64Encoder()],
    ['expiredAt', getI64Encoder()],
    ['padding', fixEncoderSize(getBytesEncoder(), 5)],
    ['noTransition', getU8Encoder()],
    ['nextSequence', getU16Encoder()],
    ['numOperated', getU64Encoder()],
    ['nextCommand', getOperationCommandEntryPodEncoder()],
    ['reserved', fixEncoderSize(getBytesEncoder(), 128)],
  ]);
}

export function getOperationStateDecoder(): Decoder<OperationState> {
  return getStructDecoder([
    ['updatedSlot', getU64Decoder()],
    ['updatedAt', getI64Decoder()],
    ['expiredAt', getI64Decoder()],
    ['padding', fixDecoderSize(getBytesDecoder(), 5)],
    ['noTransition', getU8Decoder()],
    ['nextSequence', getU16Decoder()],
    ['numOperated', getU64Decoder()],
    ['nextCommand', getOperationCommandEntryPodDecoder()],
    ['reserved', fixDecoderSize(getBytesDecoder(), 128)],
  ]);
}

export function getOperationStateCodec(): Codec<
  OperationStateArgs,
  OperationState
> {
  return combineCodec(getOperationStateEncoder(), getOperationStateDecoder());
}
